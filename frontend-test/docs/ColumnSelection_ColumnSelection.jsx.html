<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: ColumnSelection/ColumnSelection.jsx</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: ColumnSelection/ColumnSelection.jsx</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import React, { forwardRef, useEffect, useState } from 'react'

/**
 * Component that renders all the column options using the forwardRef function, with rank selected by default
 * @component
 */
const ColumnSelection = forwardRef((props, ref) => {
  const [selectedColumns, setSelectedColumns] = useState({
    dma_name: false,
    dma_id: false,
    term: false,
    week: false,
    rank: true,
    refresh_date: false
  })

  /**
   * Use the column name to toggle the state of the column
   * @param {string} columnName - The name of the column to toggle in the state object
   */
  const handleColumnSelection = (columnName) => {
    setSelectedColumns((prevSelectedColumns) => {
      const newSelectedColumns = { ...prevSelectedColumns }

      // Keep 'rank' selected by default
      newSelectedColumns.rank = true

      // Deselect the other columns
      Object.keys(newSelectedColumns).forEach((key) => {
        if (key !== columnName &amp;&amp; key !== 'rank') {
          newSelectedColumns[key] = false
        }
      })

      // Invert the state of the actual column
      newSelectedColumns[columnName] = !prevSelectedColumns[columnName]

      return newSelectedColumns
    })
  }

  // Assign the state to ref when the state changes
  useEffect(() => {
    if (ref) {
      ref.current = {
        getValue: () => {
          return Object.keys(selectedColumns).filter((columnName) => selectedColumns[columnName])
        }
      }
    }
  }, [selectedColumns, ref])

  return (
    &lt;>
      &lt;section>
        &lt;div>
          &lt;h3> Column Selection &lt;/h3>
          &lt;p> Select which columns to display in the graphics. &lt;/p>
        &lt;/div>

        {Object.keys(selectedColumns).map((columnName) => (
          &lt;span key={columnName}>
            &lt;input
              type='checkbox' name={columnName} id={columnName}
              checked={selectedColumns[columnName]}
              disabled={columnName === 'rank'} onChange={() => handleColumnSelection(columnName)}
            />
            &lt;label htmlFor={columnName}> {columnName.replace('_', ' ')} &lt;/label>
          &lt;/span>
        ))}
      &lt;/section>
    &lt;/>
  )
})

ColumnSelection.displayName = 'ColumnSelection'

export default ColumnSelection
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#ColumnSelection">ColumnSelection</a></li><li><a href="global.html#Conditions">Conditions</a></li><li><a href="global.html#QueryBuilder">QueryBuilder</a></li><li><a href="global.html#TerminationClause">TerminationClause</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Tue Nov 21 2023 10:11:22 GMT-0500 (Colombia Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
